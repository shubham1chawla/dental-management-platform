{% extends "base_dashboard.html" %}

{% block content %}

{% component "page-header" %}
    {% fill "heading" %}
        <i class="bi bi-person-hearts"></i> {{patient.name}}
    {% endfill %}
    {% fill "description" %}
        View {{patient.name}}'s information and appointments.
        Update patient's details using the <i class="bi bi-pencil-square"></i> button.
    {% endfill %}
    {% fill "action" %}
        <a class="btn btn-primary" style="height: fit-content" role="button" href="/patients/{{patient.id}}/update">
            <i class="bi bi-pencil-square"></i>
            Update
        </a>
    {% endfill %}
{% endcomponent %}

<div data-id="{{patient.id}}" id="patient-details" class="card px-4 py-2">
    <div class="col-12 my-2">
        <h5>Date of Birth</h5>
        <span><i class="bi bi-cake2-fill"></i> {{patient.dob}}</span>
    </div>
    <div class="col-12 my-2">
        <h5>Gender</h5>
        <span>
            {% if patient.gender == 'M' %}
                <i class="bi bi-gender-male"></i> Male
            {% endif %}
            {% if patient.gender == 'F' %}
                <i class="bi bi-gender-female"></i> Female
            {% endif %}
            {% if patient.gender == 'O' %}
                <i class="bi bi-gender-ambiguous"></i> Other
            {% endif %}
        </span>
    </div>
    <div class="col-12 my-2">
        <h5>SSN</h5>
        <span><i class="bi bi-person-vcard"></i> ***-**-{{patient.ssn}}</span>
    </div>
    <div class="col-12 my-2">
        <h5>Address</h5>
        <span><i class="bi bi-geo-alt-fill"></i> {{patient.address}}</span>
    </div>
    <div class="col-12 my-2">
        <h5>Phone Number</h5>
        <span><i class="bi bi-telephone-fill"></i> {{patient.phone_number}}</span>
    </div>
    <div class="col-12 my-2">
        <h5>Email Address</h5>
        <span><i class="bi bi-envelope-at-fill"></i> {{patient.email}}</span>
    </div>
</div>

<h4 class="my-4">Visits</h4>
<div class="row">
    {% for appointment in appointments.reverse %}
        <div class="col-sm-12 col-md-6 col-lg-4 mb-4">
            {% component "patient-appointment-card" appointment="{{appointment}}" / %}
        </div>
    {% endfor %}
</div>

{% endblock %}
